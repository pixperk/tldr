use anyhow::Result;

#[derive(Debug)]
pub struct AsciiDiagram {
    pub title: String,
    pub content: String,
}

impl AsciiDiagram {
    pub fn new(title: String, content: String) -> Self {
        Self { title, content }
    }

    /// Extract ASCII diagram from LLM response
    pub fn extract_from_response(response: &str) -> Result<String> {
        // Look for ```ascii or ```text blocks first
        for marker in &["```ascii", "```text", "```"] {
            if let Some(start) = response.find(marker) {
                let start_content = start + marker.len();
                if let Some(end) = response[start_content..].find("```") {
                    let diagram_content = &response[start_content..start_content + end];
                    // Skip language identifier if present
                    let content = if let Some(newline) = diagram_content.find('\n') {
                        &diagram_content[newline + 1..]
                    } else {
                        diagram_content
                    };
                    return Ok(content.trim().to_string());
                }
            }
        }

        // If no code blocks found, return the whole response cleaned up
        Ok(response.trim().to_string())
    }

    /// Format the diagram for inclusion in README
    pub fn format_for_readme(&self, section_title: &str) -> String {
        format!(
            r#"## ğŸ›ï¸ {}

```
{}
```

*Diagram: {}*
"#,
            section_title, self.content, self.title
        )
    }

    /// Create a universal fallback diagram based on detected project type
    pub fn create_fallback_diagram(project_type: &str, components: &[String]) -> Self {
        let content = match project_type.to_lowercase().as_str() {
            "webapp" | "web" => Self::create_web_app_diagram(components),
            "api" | "backend" | "service" => Self::create_api_diagram(components),
            "cli" | "tool" | "command" => Self::create_cli_diagram(components),
            "library" | "package" | "module" => Self::create_library_diagram(components),
            "mobile" | "app" => Self::create_mobile_diagram(components),
            _ => Self::create_generic_diagram(components),
        };

        Self::new(format!("{} Architecture", project_type), content)
    }

    fn create_web_app_diagram(components: &[String]) -> String {
        format!(r#"â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ğŸŒ Web Application Architecture                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ–¥ï¸  FRONTEND                  âš™ï¸  BACKEND                   ğŸ’¾ DATA LAYER
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¨ UI Layer    â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  ğŸ”§ API Server  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  ğŸ“Š Database    â”‚
â”‚  ğŸ“± Components  â”‚         â”‚  ğŸ›¡ï¸  Auth       â”‚          â”‚  ğŸ—ƒï¸  Storage    â”‚
â”‚  ğŸ¯ State Mgmt  â”‚         â”‚  ğŸ“‹ Business    â”‚          â”‚  ğŸ” Queries     â”‚
â”‚  ğŸŒ HTTP Client â”‚         â”‚  ğŸ“Š Data Layer  â”‚          â”‚  ğŸ”„ Migrations  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                           â”‚                            â”‚
         â–¼                           â–¼                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“¦ Build Tools â”‚         â”‚  ğŸ³ Deployment  â”‚          â”‚  â˜ï¸  Cloud      â”‚
â”‚  ğŸ¨ Styling     â”‚         â”‚  ğŸ“Š Monitoring  â”‚          â”‚  ğŸ”’ Security    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Components: {}"#, components.join(", "))
    }

    fn create_api_diagram(components: &[String]) -> String {
        format!(r#"â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            ğŸ”§ API Service Architecture                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“¡ CLIENT LAYER              ğŸ”§ SERVICE LAYER              ğŸ’¾ DATA LAYER
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“± Mobile Apps â”‚â”€â”€â”      â”‚  ğŸŒ API Gateway â”‚          â”‚  ğŸ“Š Primary DB  â”‚
â”‚  ğŸŒ Web Clients â”‚  â”‚   â”Œâ”€â–¶â”‚  ğŸ›¡ï¸  Auth Guard â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  ğŸ—ƒï¸  Cache      â”‚
â”‚  ğŸ¤– API Clients â”‚  â””â”€â”€â”€â”¤  â”‚  ğŸ“‹ Controllers â”‚          â”‚  ğŸ“ File Store  â”‚
â”‚  ğŸ“Š Dashboards  â”‚      â””â”€â–¶â”‚  âš™ï¸  Services   â”‚          â”‚  ğŸ” Search DB   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                           â”‚                            â”‚
         â–¼                           â–¼                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“š API Docs    â”‚         â”‚  ğŸ“Š Monitoring  â”‚          â”‚  ğŸ”„ Replication â”‚
â”‚  ğŸ§ª Testing     â”‚         â”‚  ğŸ“ˆ Analytics   â”‚          â”‚  ğŸ’¿ Backup      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Components: {}"#, components.join(", "))
    }

    fn create_cli_diagram(components: &[String]) -> String {
        format!(r#"â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ğŸ–¥ï¸  CLI Tool Architecture                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“¥ INPUT LAYER               ğŸ”„ PROCESSING ENGINE           ğŸ“¤ OUTPUT LAYER
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘¤ User Input  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  ğŸ“‹ Command      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  ğŸ“„ Files       â”‚
â”‚  ğŸ“ Config      â”‚         â”‚     Parser       â”‚          â”‚  ğŸ“Š Reports     â”‚
â”‚  ğŸ”‘ Credentials â”‚         â”‚  âš™ï¸  Core Engine â”‚          â”‚  ğŸ“º Console     â”‚
â”‚  ğŸ“‚ File Args   â”‚         â”‚  ğŸ” Processor    â”‚          â”‚  ğŸ“ˆ Graphics    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                           â”‚                            â”‚
         â–¼                           â–¼                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ… Validation  â”‚         â”‚  ğŸŒ External    â”‚          â”‚  âœ¨ Formatting  â”‚
â”‚  ğŸ“‹ Help System â”‚         â”‚     APIs        â”‚          â”‚  ğŸ¨ Styling     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Components: {}"#, components.join(", "))
    }

    fn create_library_diagram(components: &[String]) -> String {
        format!(r#"â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ğŸ“¦ Library/Package Architecture                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸŒ PUBLIC API                ğŸ”§ INTERNAL MODULES           ğŸ“š DEPENDENCIES
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“‹ Main Export â”‚         â”‚  âš™ï¸  Core Logic â”‚          â”‚  ğŸ“¦ External    â”‚
â”‚  ğŸ¯ Functions   â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  ğŸ”§ Utilities   â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚     Packages    â”‚
â”‚  ğŸ“Š Classes     â”‚         â”‚  ğŸ¨ Helpers     â”‚          â”‚  ğŸ› ï¸  Dev Tools   â”‚
â”‚  ğŸ”— Interfaces â”‚         â”‚  ğŸ§ª Internal    â”‚          â”‚  ğŸ“‹ Polyfills   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                           â”‚                            â”‚
         â–¼                           â–¼                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“š Docs        â”‚         â”‚  ğŸ§ª Tests       â”‚          â”‚  ğŸ—ï¸  Build      â”‚
â”‚  ğŸ’¡ Examples    â”‚         â”‚  ğŸ“Š Coverage    â”‚          â”‚  ğŸ“¦ Package     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Components: {}"#, components.join(", "))
    }

    fn create_mobile_diagram(components: &[String]) -> String {
        format!(r#"â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ğŸ“± Mobile App Architecture                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ¨ UI LAYER                  âš™ï¸  BUSINESS LAYER            ğŸ”Œ PLATFORM LAYER
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“± Screens     â”‚         â”‚  ğŸ“‹ State Mgmt  â”‚          â”‚  ğŸ“± Native APIs â”‚
â”‚  ğŸ¯ Components  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  ğŸ”§ Services    â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  ğŸ“Š Storage     â”‚
â”‚  ğŸ¨ Styling     â”‚         â”‚  ğŸŒ Network     â”‚          â”‚  ğŸ“¡ Sensors     â”‚
â”‚  ğŸ”„ Navigation  â”‚         â”‚  ğŸ§ª Validation  â”‚          â”‚  ğŸ”” Push Notif  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                           â”‚                            â”‚
         â–¼                           â–¼                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¯ User Inter. â”‚         â”‚  ğŸ“Š Analytics   â”‚          â”‚  ğŸ—ï¸  Build      â”‚
â”‚  â™¿ Accessibilityâ”‚         â”‚  ğŸ› Error Track â”‚          â”‚  ğŸ“¦ Distributionâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Components: {}"#, components.join(", "))
    }

    fn create_generic_diagram(components: &[String]) -> String {
        format!(r#"â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            ğŸ—ï¸  Project Architecture                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“¥ INPUT/INTERFACE           ğŸ”„ CORE PROCESSING            ğŸ“¤ OUTPUT/RESULTS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘¤ User Entry  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  âš™ï¸  Main Logic â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  ğŸ“„ Generated   â”‚
â”‚  ğŸ“ Data Input  â”‚         â”‚  ğŸ”§ Algorithms  â”‚          â”‚     Content     â”‚
â”‚  âš™ï¸  Config     â”‚         â”‚  ğŸ” Processing  â”‚          â”‚  ğŸ“Š Results     â”‚
â”‚  ğŸ”— External    â”‚         â”‚  ğŸ“‹ Business    â”‚          â”‚  ğŸ’¾ Storage     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                           â”‚                            â”‚
         â–¼                           â–¼                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“‹ Validation  â”‚         â”‚  ğŸŒ External    â”‚          â”‚  âœ¨ Formatting  â”‚
â”‚  ğŸ›¡ï¸  Security   â”‚         â”‚     Services    â”‚          â”‚  ğŸ“ˆ Reporting   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Detected Components: {}"#, components.join(", "))
    }
}
